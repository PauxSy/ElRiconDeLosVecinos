<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="estilos/estilos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- NavBar -->
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
        <div class="container-fluid">
            <a href="#" class="navbar-brand">El Rincón de los Vecinos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navBarNav" aria-controls="navBarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="catalogo.html" class="nav-link">Productos</a>
                    </li>
                    <li class="nav-item">
                        <!-- ********************************* -->
                        <!-- no tiene link  -->

                        <a href="#" class="nav-link">Promociones</a>
                        
                        <!-- ******************************** -->
                    </li>
                    <li class="nav-item">
                        <a href="inicioSesioónUser.html" class="nav-link">Iniciar sesión/Registro</a>
                    </li>
                    <!-- se crea lo que se denomina una ventana modal en el icono de carrito es una ventana emergente con la info en la misma vista
                    esto posterior de controla por medio de JS -->
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="cart-toggle" data-bs-toggle="modal" data-bs-target="#cartModal">
                            <i class="fas fa-shopping-cart"></i> <span id="cart-count" class="badge bg-danger">0</span>
                        </a>
                    </li>

                    <!-- se agrega incono de user con menú desplegable -->

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="me-2">Bienvenido, <strong>Juan Pérez</strong></span>
                            <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="perfil" width="30" height="30" class="rounded-cricle me-2">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="perfilUser.html">Ver Perfil</a></li>
                            <li><a class="dropdown-item" href="historialCompraUser.html">Historial De Compras</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#">Cerrar Sesión</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-3">
        <form class="d-flex" role="search">
            <input class="form-control me-2 search-bar" type="search" placeholder="Buscar productos" aria-label="Buscar">
            <button class="btn btn-outline-success" type="submit">Buscar</button>
        </form>
    </div>
    
    <!-- me faltaría añadir el stock pero me dio flojera de momento  -->

    <!-- Catálogo de los productos  -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <a href="producto1.html">
                        <img src="media/lecheEntera1Lt.webp" class="card-img-top" alt="Leche Entera 1LT">
                    </a>
                    <div class="card-body text-center">
                        <h5 class="card-title">Leche Entera 1LT</h5>
                        <p class="card-text">$1300</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="1" data-price="1300" data-name="Leche Entera 1LT" data-image="media/lecheEntera1Lt.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 2 con descuento 20% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/panIdeal700G.webp" class="card-img-top" alt="Pan Ideal 700g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Pan Ideal 700g</h5>
                        <p class="precio-original">$4300</p>
                        <p class="precio-descuento">$3440</p>
                        <p class="porcentaje-descuento">Descuento del 20%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="2" data-price="3440" data-name="Pan Ideal 700g" data-image="media/panIdeal700G.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 3 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/fantaRetornable2LT.jpg" class="card-img-top" alt="Fanta Retornable 2LT">
                    <div class="card-body text-center">
                        <h5 class="card-title">Fanta Retornable 2LT</h5>
                        <p class="card-text">$1900</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="3" data-price="1900" data-name="Fanta Retornable 2LT" data-image="media/fantaRetornable2LT.jpg">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 4 con descuento 15% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/cerealChocoKrispis.webp" class="card-img-top" alt="Cereal Choco Krispis 500g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Cereal Choco Krispis 500g</h5>
                        <p class="precio-original">$2500</p>
                        <p class="precio-descuento">$2125</p>
                        <p class="porcentaje-descuento">Descuento del 15%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="4" data-price="2125" data-name="Cereal Choco Krispis 500g" data-image="media/cerealChocoKrispis.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 5 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/aguaMineral500ml.jpg" class="card-img-top" alt="Agua Mineral 500ml">
                    <div class="card-body text-center">
                        <h5 class="card-title">Agua Mineral 500ml</h5>
                        <p class="card-text">$600</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="5" data-price="600" data-name="Agua Mineral 500ml" data-image="media/aguaMineral500ml.jpg">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 6 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/cheetos300g.webp" class="card-img-top" alt="Cheetos 300g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Cheetos 300g</h5>
                        <p class="card-text">$2500</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="6" data-price="2500" data-name="Cheetos 300g" data-image="media/cheetos300g.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 7 con descuento 10% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/gatoradeCooBlue1Lt.webp" class="card-img-top" alt="Gatorade Cool Blue 1LT">
                    <div class="card-body text-center">
                        <h5 class="card-title">Gatorade cool blue 1LT</h5>
                        <p class="precio-original">$2500</p>
                        <p class="precio-descuento">$2250</p>
                        <p class="porcentaje-descuento">Descuento del 10%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="7" data-price="2250" data-name="Gatorade cool blue 1LT" data-image="media/gatoradeCooBlue1Lt.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 8 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/cocaCola2LT.webp" class="card-img-top" alt="Coca Cola 2LT">
                    <div class="card-body text-center">
                        <h5 class="card-title">Coca Cola Retornable 2LT</h5>
                        <p class="card-text">$1900</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="8" data-price="1900" data-name="Coca Cola Retornable 2LT" data-image="media/cocaCola2LT.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 9 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/mantequilla250g.webp" class="card-img-top" alt="Mantequilla con sal Colun 250g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Mantequilla con Sal Colun 250g</h5>
                        <p class="card-text">$3500</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="9" data-price="3500" data-name="Mantequilla con Sal Colun 250g" data-image="media/mantequilla250g.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 10 con descuento 25% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/galletasChoco.webp" class="card-img-top" alt="Galletas de Chocolate 140g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Galletas de Chocolate 140g</h5>
                        <p class="precio-original">$1200</p>
                        <p class="precio-descuento">$900</p>
                        <p class="porcentaje-descuento">Descuento del 25%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="10" data-price="900" data-name="Galletas de Chocolate 140g" data-image="media/galletasChoco.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 11 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/yogurtFrutilla1L.webp" class="card-img-top" alt="Yogurt Frutilla 1L">
                    <div class="card-body text-center">
                        <h5 class="card-title">Yogurt Frutilla Soprole 1L</h5>
                        <p class="card-text">$2200</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="11" data-price="2200" data-name="Yogurt Frutilla Soprole 1L" data-image="media/yogurtFrutilla1L.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 12 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/maniSalado160.webp" class="card-img-top" alt="Maní Salado Evercrisp 160g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Maní Salado Evercrisp 160g</h5>
                        <p class="card-text">$1700</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="12" data-price="1700" data-name="Maní Salado Evercrisp 160g" data-image="media/maniSalado160.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 13 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/Doritos150g.webp" class="card-img-top" alt="Doritos queso 150g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Doritos Queso 150g</h5>
                        <p class="card-text">$1600</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="13" data-price="1600" data-name="Doritos Queso 150g" data-image="media/Doritos150g.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 14 con descuento 30% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/heladoPina1L.webp" class="card-img-top" alt="Helado de Piña 1L">
                    <div class="card-body text-center">
                        <h5 class="card-title">Helado de Piña Savory 1L</h5>
                        <p class="precio-original">$3200</p>
                        <p class="precio-descuento">$2240</p>
                        <p class="porcentaje-descuento">Descuento del 30%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="14" data-price="2240" data-name="Helado de Piña Savory 1L" data-image="media/heladoPina1L.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 15 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/cafeTradicion170g.webp" class="card-img-top" alt="Café Nescafe Tradición 170g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Café Nescafe Tradición 170g</h5>
                        <p class="card-text">$3500</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="15" data-price="3500" data-name="Café Nescafe Tradición 170g" data-image="media/cafeTradicion170g.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 16 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/arrozBlanco1kg.webp" class="card-img-top" alt="Arroz Blanco 1kg">
                    <div class="card-body text-center">
                        <h5 class="card-title">Arroz Blanco Merkat 1kg</h5>
                        <p class="card-text">$1500</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="16" data-price="1500" data-name="Arroz Blanco Merkat 1kg" data-image="media/arrozBlanco1kg.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 17 con descuento 10% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/sprite2LT.webp" class="card-img-top" alt="Huevos 12 unidades">
                    <div class="card-body text-center">
                        <h5 class="card-title">Sprite Retornable 2LT</h5>
                        <p class="precio-original">$1900</p>
                        <p class="precio-descuento">$1710</p>
                        <p class="porcentaje-descuento">Descuento del 10%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="17" data-price="1710" data-name="Sprite Retornable 2LT" data-image="media/sprite2LT.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 18 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/aceiteVegetal900.webp" class="card-img-top" alt="Aceite Vegetal Merkat 900ml">
                    <div class="card-body text-center">
                        <h5 class="card-title">Aceite Vegetal Merkat 900ml</h5>
                        <p class="card-text">$2000</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="18" data-price="2000" data-name=">Aceite Vegetal Merkat 900ml" data-image="media/aceiteVegetal900.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 19 con descuento 35% -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/chocolateBarras150g.webp" class="card-img-top" alt="Chocolate en Barras 150g">
                    <div class="card-body text-center">
                        <h5 class="card-title">Chocolate en Barras Trencito 150g</h5>
                        <p class="precio-original">$1450</p>
                        <p class="precio-descuento">$942</p>
                        <p class="porcentaje-descuento">Descuento del 35%</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="19" data-price="942" data-name="Chocolate en Barras Trencito 150g" data-image="media/chocolateBarras150g.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>

            <!-- Producto 20 -->
            <div class="col-md-3 mb-4">
                <div class="card h-100">
                    <img src="media/monsterRegular.webp" class="card-img-top" alt="Monster Regular  473ml">
                    <div class="card-body text-center">
                        <h5 class="card-title">Monster Regular 473ml</h5>
                        <p class="card-text">$2200</p>
                        <button class="btn btn-primary add-to-cart" data-product-id="20" data-price="2200" data-name="Monster Regular 473ml" data-image="media/monsterRegular.webp">Agregar al carrito</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- vista del modal -->

    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-top-right">
            <div class="modal-content border-0 shadow">
                <div class="modal-header bg-navbar-custom">
                    <h5 class="modal-title" id="cartModalLabel">Tu carrito de compras</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body p-4">
                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                            <tr>
                                <th class="product-name">Producto</th>
                                <th>Precio</th>
                                <th>Cantidad</th>
                                <th>Total</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody id="cart-items">
                            <!-- Aquí se cargan los productos del carrito -->
                        </tbody>
                    </table>
                    <div class="text-end mt-3">
                        <h5>Total: <span id="cart-total" class="fw-bold">$0.00</span></h5>
                    </div>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-outline-danger" id="empty-cart">Vaciar carrito</button>
                    <button type="button" class="btn btn-success">Finalizar compra</button>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Footer -->
    <footer class="bg-dark text-white text-center text-lg-start mt-5">
        <div class="container p-4">
            <div class="row">
                <div class="col-lg-6 col-md-12 mb-4 mb-md-0">
                    <h5 class="text-uppercase">El Rincón de los Vecinos</h5>
                    <p>
                        Calle Falsa 123, 28080 Santiago, Chile
                        <br>
                        Teléfono: +56 920 123 456
                        <br>
                        Email: contacto@elrincondelosvecinos.cl
                    </p>
                </div>
                <div class="col-lg-6 col-md-12 mb-4 mb-md-0">
                    <h5 class="text-uppercase">Horario de Atención</h5>
                    <p>
                        Lunes a Viernes: 9:00 AM - 22:30 PM
                        <br>
                        Sábados: 10:00 AM - 16:00 PM
                        <br>
                        Domingos: Cerrado
                    </p>
                </div>
            </div>
        </div>
        <div class="text-center p-3 bg-secondary">
            © 2024 El Rincón de los Vecinos - Todos los derechos reservados
        </div>
    </footer>

    <!-- Scripts -->
    
    <script>
        let cart = [];
        const cartCountElement = document.getElementById('cart-count');
    
        function updateCartCount() {
            const itemCount = cart.reduce((total, product) => total + product.quantity, 0);
            cartCountElement.textContent = itemCount;
        }
    
        function addToCart(productId, productName, productPrice, productImage) {
            const existingProduct = cart.find(item => item.id === productId);
            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                cart.push({ id: productId, name: productName, price: productPrice, quantity: 1, image: productImage });
            }
            updateCartCount();
            displayCart();
        }
    
        function displayCart() {
            const cartItemsElement = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            cartItemsElement.innerHTML = '';
    
            let total = 0;
    
            cart.forEach(product => {
                const { id, name, price, quantity, image } = product;
                const subtotal = price * quantity;
                total += subtotal;
    
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="product-info d-flex align-items-center">
                            <img src="${image}" alt="${name}" width="50" height="50" class="me-2">
                            <span>${name}</span>
                        </div>
                    </td>
                    <td>$${price}</td>
                    <td class="text-center">
                        <div class="quantity-control"> <!-- Usa esta clase para el contenedor -->
                            <button class="btn btn-quantity change-quantity me-2" data-product-id="${id}" data-action="decrease">-</button>
                            <span class="quantity-number">${quantity}</span> <!-- Clase para centrar el número -->
                            <button class="btn btn-quantity change-quantity ms-2" data-product-id="${id}" data-action="increase">+</button>
                        </div>
                    </td>
                    </td>
                    <td>$${subtotal}</td>
                    <td><button class="btn btn-danger remove-from-cart" data-product-id="${id}">Eliminar</button></td>
                `;
                cartItemsElement.appendChild(row);
            });
            cartTotalElement.innerHTML = `<strong>Total: $${total}</strong>`;
        }
    
        function removeFromCart(productId) {
            const productIndex = cart.findIndex(item => item.id === productId);
            if (productIndex !== -1) {
                cart.splice(productIndex, 1);
                updateCartCount();
                displayCart();
            }
        }
    
        function changeQuantity(productId, action) {
            const product = cart.find(item => item.id === productId);
            if (product) {
                if (action === 'increase') {
                    product.quantity += 1;
                } else if (action === 'decrease' && product.quantity > 1) {
                    product.quantity -= 1;
                }
                displayCart();
            }
        }
    
        function emptyCart() {
            cart = [];
            updateCartCount();
            displayCart();
        }
    
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', (event) => {
                const productId = parseInt(button.getAttribute('data-product-id'));
                const productName = button.getAttribute('data-name');
                const productPrice = parseFloat(button.getAttribute('data-price'));
                const productImage = button.getAttribute('data-image');
                addToCart(productId, productName, productPrice, productImage);
            });
        });
    
        document.getElementById('cart-items').addEventListener('click', (event) => {
            if (event.target.classList.contains('remove-from-cart')) {
                const productId = parseInt(event.target.getAttribute('data-product-id'));
                removeFromCart(productId);
            } else if (event.target.classList.contains('change-quantity')) {
                const productId = parseInt(event.target.getAttribute('data-product-id'));
                const action = event.target.getAttribute('data-action');
                changeQuantity(productId, action);
            }
        });
    
        document.getElementById('empty-cart').addEventListener('click', emptyCart);
    
        document.getElementById('cart-toggle').addEventListener('click', displayCart);
    
        updateCartCount();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
